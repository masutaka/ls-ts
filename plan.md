# lsコマンド実装計画

## 1. プロジェクト初期設定
- [ ] プロジェクトディレクトリの作成
  - `src/`: ソースコード
  - `tests/`: テストコード
  - `dist/`: ビルド成果物
- [ ] pnpmの初期化
- [ ] TypeScriptの設定
  - `tsconfig.json`の作成
  - ビルド設定
- [ ] 必要なパッケージのインストール
  - TypeScript
  - Jest（テストフレームワーク）
  - @types/node（Node.jsの型定義）

## 2. 基本機能の実装
- [ ] ファイルシステム操作の基本機能実装
  - ディレクトリの読み込み
  - ファイル情報の取得
- [ ] 基本的なlsコマンドの実装
  - オプションなしの基本表示
  - ファイル名のソート（アルファベット順）

## 3. オプション機能の実装
- [ ] `-a`オプションの実装
  - 隠しファイル（.で始まるファイル）の表示
- [ ] `-l`オプションの実装
  - ファイルタイプ（-: 通常ファイル, d: ディレクトリ, l: シンボリックリンク）
  - パーミッション（rwx形式）
  - 所有者（ユーザー名）
  - グループ（グループ名）
  - サイズ（バイト単位）
  - 最終更新日時（"Apr 11 15:18"形式）
- [ ] `-F`オプションの実装
  - ディレクトリ: /
  - 実行可能ファイル: *
  - シンボリックリンク: @
- [ ] `--color`オプションの実装
  - ディレクトリ: 青色
  - 実行可能ファイル: 緑色
  - シンボリックリンク: シアン
  - 通常ファイル: デフォルト色

## 4. テストと品質管理
- [ ] 単体テストの実装（Jest）
  - 各オプションのテストケース作成
  - エラーケースのテスト
  - ファイルシステム操作のモック化
- [ ] エラーハンドリングの実装
  - エラーメッセージ（英語）
  - 終了コード（0: 成功, 1: エラー）
- [ ] コードのリファクタリング
  - 型定義の整理
  - モジュール分割
  - エラーハンドリングの統一

## 5. ドキュメント作成
- [ ] 使用方法のドキュメント作成
  - インストール方法
  - 基本的な使い方
- [ ] コマンドラインオプションの説明
  - 各オプションの詳細な説明
  - 使用例
- [ ] 実装の振り返りとspec.mdの更新
  - 実装のポイント
  - 課題と改善点

## 実装の詳細仕様

### 出力フォーマット
- `-l`オプションの出力形式:
  ```
  -rw-r--r--  1 user  group  1234  Apr 11 15:18 filename
  drwxr-xr-x  2 user  group  4096  Apr 11 15:18 dirname
  ```

### エラーハンドリング
- エラーメッセージ:
  - ファイル/ディレクトリが存在しない場合: "No such file or directory"
  - 権限エラー: "Permission denied"
  - その他のエラー: 適切なエラーメッセージを表示

### 終了コード
- 0: 正常終了
- 1: エラー発生

## 確認が必要な事項
1. プロジェクトのディレクトリ構造について
   - ソースコードの配置場所
   - テストコードの配置場所
   - ビルド成果物の出力先

2. テストの要件について
   - 単体テストの範囲
   - テストフレームワークの選択

3. 出力フォーマットの詳細
   - `-l`オプションの詳細な表示形式
   - 日時の表示形式
   - サイズの表示形式

4. エラーハンドリングの要件
   - エラーメッセージの形式
   - 終了コードの定義 